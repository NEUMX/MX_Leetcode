# 128. 最长连续序列

### 思路（<font style="color:#DF2A3F;">hashset 判断是否存在前一个，不存在就从当前开始，判断是否存在后一个，存在就++</font>）
### 解题思路：
要实现 O(n) 的时间复杂度，我们可以使用 **哈希集合（HashSet）** 来解决问题。具体思路如下：

1. **哈希集合的作用**：
    - 哈希集合可以支持 O(1) 的查找和插入操作。
    - 通过将所有数字存储到哈希集合中，我们可以在 O(1) 的时间内判断一个数字是否存在于集合中。
2. **核心思路**：
    - 遍历数组中的每个数字，对于每个数字 `num`，如果 `num - 1` 不在哈希集合中，说明 `num` 是一个可能的序列的起点。
    - 然后，从 `num` 开始，逐步向上查找 `num + 1`, `num + 2`, ...，直到找不到连续的数字为止。这样可以快速找到以 `num` 为起点的最长连续子序列的长度。
    - 更新最大长度。
3. **优化点**：
    - 每个数字只会被处理一次，所以整个算法的时间复杂度是 O(n)，其中 n 是数组的长度。

#### 代码
```java
class Solution {
    // 定义一个方法，用于找到数组中最长的连续元素序列的长度
    public int longestConsecutive(int[] nums) {
        // 使用一个HashSet来存储数组中的所有元素，以便快速查找
        Set<Integer> num_set = new HashSet<Integer>();
        for (int num : nums) {
            num_set.add(num);
        }

        // 初始化最长连续序列的长度为0
        int longestStreak = 0;

        // 遍历HashSet中的每个元素
        for (int num : num_set) {
            // 如果当前元素是一个连续序列的起点（即它的前一个元素不在HashSet中）
            if (!num_set.contains(num - 1)) {
                // 初始化当前连续序列的起点和长度
                int currentNum = num;
                int currentStreak = 1;

                // 向后查找连续的元素，直到找不到为止
                while (num_set.contains(currentNum + 1)) {
                    currentNum += 1;
                    currentStreak += 1;
                }

                // 更新最长连续序列的长度
                longestStreak = Math.max(longestStreak, currentStreak);
            }
        }

        // 返回最长连续序列的长度
        return longestStreak;
    }
}

```

### 代码解析：
1. **哈希集合 **`**numSet**`：
    - 首先，将数组中的每个数字加入哈希集合中，确保可以在 O(1) 的时间内查找一个数字是否存在。
2. **遍历 **`**numSet**`：
    - 对每个数字，我们检查它是否是一个序列的起点。判断方法是看 `num - 1` 是否存在于集合中。如果不存在，则 `num` 是一个潜在的序列起点。
3. **查找连续序列**：
    - 对于每个潜在起点，尝试连续地查找 `num + 1`, `num + 2`, ...，直到找不到连续的数字为止。
4. **更新最大序列长度**：
    - 每次找到一个新的连续序列时，比较当前序列长度和最大序列长度，更新最大值。

### 时间复杂度：
+ **时间复杂度**：O(n)，其中 n 是数组的长度。每个元素只会被处理一次，且查找和插入操作在哈希集合中是 O(1) 的。
+ **空间复杂度**：O(n)，用于存储哈希集合中的元素。



> 更新: 2025-02-17 21:11:51  
> 原文: <https://www.yuque.com/neumx/ko4psh/ugecu7hpvklnlhs3>