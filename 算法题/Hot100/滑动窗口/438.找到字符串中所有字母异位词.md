# 438. 找到字符串中所有字母异位词

### 思路（<font style="color:#DF2A3F;"> 字符数组加滑动窗口</font>）
### 解题思路：
1. **字母异位词的性质**：
    - 两个字符串是字母异位词，意味着它们的字符和字符的出现频率是相同的。因此，我们可以通过字符频率来判断两个字符串是否是字母异位词。
2. **滑动窗口技巧**：
    - 我们可以使用滑动窗口来查找 `s` 中所有与 `p` 的异位词匹配的子串。
    - 用一个大小为 `p` 长度的滑动窗口遍历 `s`，并比较每个窗口内的字符频率是否与 `p` 的字符频率相同。
3. **具体步骤**：
    - 首先，计算 `p` 中每个字符的频率。
    - 使用一个滑动窗口，初始窗口大小与 `p` 的长度相同，遍历 `s`，每次向右滑动一个字符，更新窗口内字符的频率。
    - 每次滑动时，比较窗口中的字符频率与 `p` 的字符频率是否相同。
4. **效率优化**：
    - 使用一个哈希表来记录 `p` 中字符的频率，并使用一个滑动窗口来动态更新当前窗口内的字符频率。这样，每次滑动时只需要常数时间来更新频率。

#### 代码
```java

public class Solution {
    // 定义一个类，包含一个查找字母异位词的方法
    public List<Integer> findAnagrams(String s, String p) {
        // 创建一个结果列表，用于存储找到的字母异位词的起始索引
        List<Integer> ans = new ArrayList<>();

        // 获取字符串s和p的长度
        int sLength = s.length();
        int pLength = p.length();

        // 如果s的长度小于p的长度，则直接返回结果列表，因为没有足够的字符来形成异位词
        if (sLength < pLength) {
            return ans;
        }

        // 创建两个数组，用于存储s和p中每个字母的出现次数
        int[] sCount = new int[26]; // 存储s中字母出现次数的数组
        int[] pCount = new int[26]; // 存储p中字母出现次数的数组

        // 遍历字符串p，将每个字符的出现次数记录在pCount数组中
        for (int i = 0; i < pLength; i++) {
            // 增加sCount数组中s[i]对应字母的出现次数
            sCount[s.charAt(i) - 'a']++;
            // 增加pCount数组中p[i]对应字母的出现次数
            pCount[p.charAt(i) - 'a']++;
        }

        // 检查第一个窗口（即s的前pLength个字符）是否是字母异位词
        if (Arrays.equals(sCount, pCount)) {
            // 如果相等，则添加第一个窗口的起始索引0到结果列表
            ans.add(0);
        }

        // 遍历字符串s，从第一个窗口之后开始滑动窗口
        for (int i = 0; i < sLength - pLength; i++) {
            // 移除窗口左边的字符在sCount数组中的计数
            sCount[s.charAt(i) - 'a']--;
            // 添加窗口右边的字符在sCount数组中的计数
            sCount[s.charAt(i + pLength) - 'a']++;

            // 检查当前窗口是否是字母异位词
            if (Arrays.equals(sCount, pCount)) {
                // 如果相等，则添加当前窗口的起始索引i+1到结果列表
                ans.add(i + 1);
            }
        }

        // 返回结果列表
        return ans;
    }
}

```

### 代码解析：
1. **初始化**：
    - 创建两个大小为 26 的整数数组 `pCount` 和 `sCount`，分别用来存储字符串 `p` 和当前滑动窗口内的字符频率。
2. **填充频率数组**：
    - 使用 `pCount` 数组来记录字符串 `p` 中各个字符的频率。对于字符串 `s`，我们通过滑动窗口来维护 `sCount` 数组。
3. **滑动窗口**：
    - 在 `s` 中滑动窗口的过程中，逐个字符地更新 `sCount`，并每次当窗口的大小达到 `p` 的长度时，检查 `sCount` 是否与 `pCount` 相等。如果相等，说明当前窗口是 `p` 的一个异位词。
    - 如果窗口的大小超过了 `p` 的长度，我们就通过减少 `sCount` 中左边字符的频率来保持窗口大小不变。
4. **输出结果**：
    - 每当找到一个异位词时，将该子串的起始索引加入结果列表。

### 示例分析：
1. **示例1**：`s = "cbaebabacd"`, `p = "abc"`
    - 在 `s` 中，`"cba"` 和 `"bac"` 都是 `"abc"` 的异位词，因此输出结果是 `[0, 6]`。
2. **示例2**：`s = "abab"`, `p = "ab"`
    - 在 `s` 中，`"ab"`、`"ba"`、`"ab"` 都是 `"ab"` 的异位词，因此输出结果是 `[0, 1, 2]`。

### 时间复杂度：
+ **时间复杂度**：O(n)，其中 `n` 是字符串 `s` 的长度。我们只需要遍历字符串 `s` 一次，更新字符频率的操作是常数时间的。
+ **空间复杂度**：O(1)，由于字母集大小固定（比如 ASCII 字符集只有 26 个字母），空间复杂度是 O(1)。



> 更新: 2025-02-17 22:05:46  
> 原文: <https://www.yuque.com/neumx/ko4psh/hm4x5e71ygqdnngh>